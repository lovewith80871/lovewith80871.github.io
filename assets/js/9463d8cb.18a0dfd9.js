"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7676],{3905:(t,e,n)=>{n.d(e,{Zo:()=>i,kt:()=>d});var o=n(7294);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,o,a=function(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var c=o.createContext({}),s=function(t){var e=o.useContext(c),n=e;return t&&(n="function"==typeof t?t(e):u(u({},e),t)),n},i=function(t){var e=s(t.components);return o.createElement(c.Provider,{value:e},t.children)},p={inlineCode:"code",wrapper:function(t){var e=t.children;return o.createElement(o.Fragment,{},e)}},m=o.forwardRef((function(t,e){var n=t.components,a=t.mdxType,r=t.originalType,c=t.parentName,i=l(t,["components","mdxType","originalType","parentName"]),m=s(n),d=a,k=m["".concat(c,".").concat(d)]||m[d]||p[d]||r;return n?o.createElement(k,u(u({ref:e},i),{},{components:n})):o.createElement(k,u({ref:e},i))}));function d(t,e){var n=arguments,a=e&&e.mdxType;if("string"==typeof t||a){var r=n.length,u=new Array(r);u[0]=m;var l={};for(var c in e)hasOwnProperty.call(e,c)&&(l[c]=e[c]);l.originalType=t,l.mdxType="string"==typeof t?t:a,u[1]=l;for(var s=2;s<r;s++)u[s]=n[s];return o.createElement.apply(null,u)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6471:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>u,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var o=n(7462),a=(n(7294),n(3905));const r={slug:"/useState_intro"},u="useState \u4ecb\u7d39",l={unversionedId:"react/01useState_intro",id:"react/01useState_intro",title:"useState \u4ecb\u7d39",description:"\u5927\u7db1",source:"@site/docs/react/01useState_intro.md",sourceDirName:"react",slug:"/useState_intro",permalink:"/docs/useState_intro",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/react/01useState_intro.md",tags:[],version:"current",frontMatter:{slug:"/useState_intro"},sidebar:"tutorialSidebar",previous:{title:"React",permalink:"/docs/category/react"},next:{title:"useState \u5206\u6790",permalink:"/docs/useState_anylisis"}},c={},s=[{value:"\u5927\u7db1",id:"\u5927\u7db1",level:2},{value:"\u4ec0\u9ebc\u662f useState",id:"\u4ec0\u9ebc\u662f-usestate",level:2},{value:"\u5982\u4f55\u4f7f\u7528 useState",id:"\u5982\u4f55\u4f7f\u7528-usestate",level:2},{value:"\u8981\u7279\u5225\u6ce8\u610f\u7684\u4e8b\u9805",id:"\u8981\u7279\u5225\u6ce8\u610f\u7684\u4e8b\u9805",level:2},{value:"1. setCount(count + 1) VS setCount(count =&gt; count + 1)\uff1f",id:"1-setcountcount--1-vs-setcountcount--count--1",level:3},{value:"2. Lazy initial state",id:"2-lazy-initial-state",level:3}],i={toc:s};function p(t){let{components:e,...n}=t;return(0,a.kt)("wrapper",(0,o.Z)({},i,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"usestate-\u4ecb\u7d39"},"useState \u4ecb\u7d39"),(0,a.kt)("h2",{id:"\u5927\u7db1"},"\u5927\u7db1"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4ec0\u9ebc\u662f useState"),(0,a.kt)("li",{parentName:"ul"},"\u5982\u4f55\u4f7f\u7528 useState"),(0,a.kt)("li",{parentName:"ul"},"\u8981\u7279\u5225\u6ce8\u610f\u7684\u4e8b\u9805")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u4ec0\u9ebc\u662f-usestate"},"\u4ec0\u9ebc\u662f useState"),(0,a.kt)("p",null,"\u4e00\u822c\u60c5\u6cc1\u4e0b\uff0cFunction component \u662f\u6c92\u8fa6\u6cd5\u4fdd\u7559 state \u7684\u3002\n\u6240\u4ee5\u5fc5\u9808\u85c9\u7531 useState Hook \u4f86\u5c0d Function component \u88e1\u9762\u5b58 local state\u3002"),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u5982\u4f55\u4f7f\u7528-usestate"},"\u5982\u4f55\u4f7f\u7528 useState"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},"import React, { useState } from 'react';\n\nconst SampleUseState = () => {\n  // count \u662f state, setCount \u662f\u4fee\u6539 count \u7684 function\n  const [count, setCount] = useState(0);\n  const clickHandler = () => {\n    setCount(count + 1);\n  };\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => clickHandler()}> add count </button>\n    </div>\n  );\n};\nexport default SampleUseState;\n")),(0,a.kt)("p",null,"\u9019\u908a\u7a0d\u5fae\u63d0\u4e00\u4e0b\u4e0a\u9762\u7a0b\u5f0f\u78bc\u662f\u5728\u5e79\u561b\u3002"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u7b2c 5 \u884c\uff1a\u6211\u5011\u5b9a\u7fa9 count \u7684 state \u70ba 0\uff0c\u4e14 setCount \u70ba\u4fee\u6539 count \u7684 function\u3002\u5982\u679c\u9700\u8981\u4fee\u6539 count \u7684\u503c\u6642\u5fc5\u9808\u8981\u900f\u904e setCount \u9019\u500b function ",(0,a.kt)("br",null),"\n\u7b2c 12 \u884c\uff1a\u4f7f\u7528\u8005\u9ede\u64ca\u6642\uff0c\u8b93 count +1\u3002")),(0,a.kt)("p",null,"\u9019\u6a23\u6211\u5011\u5c31\u53ef\u4ee5\u55ae\u7d14\u7684\u5728 Function component \u88e1\u9762\u53bb\u8b80\u8ddf\u5beb\u9019\u500b state\u3002 ",(0,a.kt)("strong",{parentName:"p"},"\u4e14\u4e0d\u5fc5\u64d4\u5fc3\u9019\u500b state \u5728\u6bcf\u6b21 re-render \u7684\u6642\u5019\u6703\u88ab\u6e05\u6389\u3002")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\u8981\u7279\u5225\u6ce8\u610f\u7684\u4e8b\u9805"},"\u8981\u7279\u5225\u6ce8\u610f\u7684\u4e8b\u9805"),(0,a.kt)("p",null,"\u9019\u88e1\u60f3\u63d0\u5169\u500b\u4f7f\u7528 useState \u9700\u8981\u7279\u5225\u6ce8\u610f\u7684\u4e8b\u9805\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"setCount(count + 1) vs setCount(count => count + 1)\uff1f"),(0,a.kt)("li",{parentName:"ul"},"Lazy initial state")),(0,a.kt)("h3",{id:"1-setcountcount--1-vs-setcountcount--count--1"},"1. setCount(count + 1) VS setCount(count => count + 1)\uff1f"),(0,a.kt)("p",null,"\u4e0a\u9762\u9019\u5169\u500b\u5beb\u6cd5\u5230\u5e95\u6709\u4ec0\u9ebc\u5dee\u7570\u5462\uff1f\u8b93\u6211\u5011\u5148\u6539\u5beb\u4e00\u4e0b\u539f\u672c\u7684 clickHandler \u9019\u500b function\uff0c\u8b93\u4ed6\u57f7\u884c +1 \u9019\u500b\u52d5\u4f5c\u5169\u6b21\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},"const clickHandlerOne = () => {\n  // \u7d50\u679c: \u53ea\u6703\u52a01\n  setCount(count + 1);\n  setCount(count + 1);\n};\nconst clickHandlerTwo = () => {\n  // \u7d50\u679c: \u6703\u52a02\n  setCount((count) => count + 1);\n  setCount((count) => count + 1);\n};\n")),(0,a.kt)("p",null,"\u4e0a\u8ff0\u7a0b\u5f0f\u78bc\uff0c\u6211\u5011\u7528\u4f86\u4ee3\u66ff\u539f\u672c\u7684 clickHandler \u5f8c\uff0c\u5206\u5225\u6703\u767c\u751f\u4ec0\u9ebc\u4e8b\u5462\uff1f\n\u9810\u671f\u6211\u5011\u60f3\u5c0d\u539f\u672c\u7684 count+1 \u5169\u6b21\uff0c\u4e5f\u5c31\u662f\u5e0c\u671b\u7d50\u679c\u662f+2\u3002\u6211\u5011\u53ef\u4ee5\u770b\u5230\u5728 clickHandlerOne \u88e1\uff0c\u7d50\u679c\u53ea\u6703+1\u3002\u4f46 clickHandlerTwo \u537b\u53ef\u4ee5\u9054\u5230\u6211\u5011\u60f3+2 \u7684\u9700\u6c42\u3002"),(0,a.kt)("p",null,"\u6703\u767c\u751f\u9019\u500b\u7d50\u679c\u7684\u539f\u56e0\u662f\uff0c\u5728 clickHandlerOne \u88e1\u9762\uff0c\u6211\u5011\u662f\u7528\u9801\u9762\u672c\u8eab\u88ab\u5b9a\u7fa9\u7684 count \u505a+1\uff0c\u4f46\u56e0\u70ba\u9801\u9762\u672c\u8eab\u7684 count \u4e26\u4e0d\u6703\u7acb\u5373\u7684\u66f4\u65b0\uff0c\u6240\u4ee5\u5c0e\u81f4\u6211\u5011\u662f\u505a\u4e86\u5169\u6b21 0+1 \u7684\u7528\u6cd5\u3002\u4e0d\u904e\u5728 clickHanlderTwo \u88e1\u9762\uff0c\u53ef\u80fd\u773c\u5c16\u7684\u4f60\u5c31\u6703\u767c\u73fe\uff0c\u6211\u5011\u662f\u5728\u5c0d\u4e00\u500b callback function \u88e1\u9762\u7684\u53c3\u6578\u505a+1\uff0c\u9019\u88e1\u53ef\u4ee5\u5148\u8aaa\uff0c\u9019\u500b callback function \u88e1\u7684\u53c3\u6578\u662f\u5373\u6642\u88ab\u66f4\u65b0\u7684\u3002\u81f3\u65bc\u4ed6\u662f\u5982\u4f55\u505a\u5230\uff0c\u8981\u7b49\u5230\u4e0b\u4e00\u7bc7\u7684\u5be6\u4f5c\u6211\u5011\u624d\u6703\u91d0\u6e05\u3002"),(0,a.kt)("h3",{id:"2-lazy-initial-state"},"2. Lazy initial state"),(0,a.kt)("p",null,"\u9019\u88e1\u8981\u5148\u77e5\u9053\u4e00\u4ef6\u4e8b\uff0c\u7576\u5143\u4ef6\u521d\u59cb\u5316\u6642\uff0c useState \u6703\u5148\u5c07 initial value \u5beb\u5165\u6211\u5011\u5b9a\u7fa9\u7684\u53c3\u6578(\u9019\u88e1\u7bc4\u4f8b\u662f count )\uff0c\u4e4b\u5f8c rerender \u6642 initial value \u662f\u4ec0\u9ebc\u5c31\u4e0d\u91cd\u8981\u4e86\u3002"),(0,a.kt)("p",null,"\u6211\u5011\u7528\u4ee5\u4e0b\u7bc4\u4f8b\u4f86\u8aaa\u660e\u8981\u5982\u548c\u4f7f\u7528 Lazy initial state \u7684\u7279\u6027"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},"const someExpensiveComputation = () => {\n  console.log('expensive computation'); // \u4ee3\u8868\u904b\u7b97\u91cf\u6975\u5927\n  return 0;\n};\n\nconst sampleUseState = () => {\n  const [count, setCount] = useState(someExpensiveComputation());\n  const clickHandler = () => {\n    setCount((count) => count + 1);\n  };\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => clickHandler()}> add count </button>\n    </div>\n  );\n};\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\u9019\u88e1\u6211\u5011\u591a\u4e86\u4e00\u500b ",(0,a.kt)("strong",{parentName:"p"},"someExpensiveComputation")," \u7684 funtion\uff0c\u7528\u4f86\u4ee3\u8868\u662f\u4e00\u500b\u904b\u7b97\u91cf\u6975\u5927\u7684 function\uff0c\u4e26\u4e14\u6703\u56de\u50b3\u6211\u4e00\u500b value\uff0c\u9019\u88e1\u7a31\u70ba initial value\u3002")),(0,a.kt)("p",null,"\u6211\u5011\u6703\u767c\u73fe\u6bcf\u6b21\u89f8\u767c clickHandler \u4f7f\u5143\u4ef6 rerender \u7684\u6642\u5019\uff0cconsole \u90fd\u6703\u5370\u51fa \u2018expensive computation\u2019 \u4ee3\u8868 rerender \u90fd\u6703\u57f7\u884c\u5230 ",(0,a.kt)("strong",{parentName:"p"},"someExpensiveComputation"),"\uff0c\u5c0e\u81f4\u6548\u80fd\u8b8a\u5f97 ",(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u597d")," \u3002\u4f46\u5176\u5be6\u6211\u5011\u5728\u521d\u59cb\u5316\u4e4b\u5f8c\u7684 rerender \u6839\u672c\u4e0d\u7528\u518d\u53bb\u7406 initial value \u662f\u4ec0\u9ebc\uff0c\u4f46\u7a0b\u5f0f\u9084\u662f\u6703\u4e00\u76f4\u7b97 someExpensiveComputation\uff0c\u6240\u4ee5\u6211\u5011\u5c31\u8981\u5229\u7528 Lazy initial state \u7684\u7279\u6027\u53bb\u907f\u958b\u9019\u4ef6\u4e8b\u3002"),(0,a.kt)("p",null,"\u9019\u6642\u5019\u6211\u5011\u628a\u7b2c\u4e03\u884c\u6539\u6210\u4ee5\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"showLineNumbers",showLineNumbers:!0},"const [count, setCount] = useState(() => someExpensiveComputation());\n// \u9019\u5c31\u662f Lazy initial state \u7684\u5beb\u6cd5\n")),(0,a.kt)("p",null,"\u5c31\u6703\u767c\u73fe\u4ed6\u53ea\u6709\u5728\u7b2c\u4e00\u6b21\u8f09\u5165\u7684\u6642\u5019\uff0c\u624d\u6703\u57f7\u884c ",(0,a.kt)("strong",{parentName:"p"},"someExpensiveComputation"),"\uff0c\u4e4b\u5f8c rerender \u7684\u6642\u5019\u90fd\u4e0d\u6703\u5728\u57f7\u884c\u9019\u500b function\u3002\u9019\u6a23\u5c31\u80fd\u9054\u6210\u6211\u5011\u7684\u9700\u6c42\u3002"),(0,a.kt)("hr",null))}p.isMDXComponent=!0}}]);